/* Componente que renderiza os Graficos:

import axios from "axios";
import { useEffect, useState } from "react";
import Chart from "chart.js/auto";
import FilterDate from "./FilterDate";

function Graphs() {
  const [bitcoinData, setBitcoinData] = useState({});
  const [loading, setLoading] = useState(true);
  const [chart, setChart] = useState(null);
  const [data, setData] = useState(null);
  const [link, setLink] = useState("http://api.coindesk.com/v1/bpi/historical/close.json");

  useEffect(() => {
    if(data !== null) {
      setLink(`https://api.coindesk.com/v1/bpi/historical/close.json?start=${data.from}&end=${data.to}`)
    }
  },[data]);

  useEffect(() => {
    setLoading(true);
    axios
      .get(link)
      .then((response) => {
        setBitcoinData({ ...response.data.bpi });
        setLoading(false);
      })
      .catch((err) => {
        setLoading(false);
        console.log(err);
      });
  }, [link]);

  useEffect(() => {
    if (!loading) {
      function renderChart() {
        const ctx = document.getElementById("myCanvas").getContext("2d");

        if (chart) {
          chart.destroy();
        }

        const chartInstance = new Chart(ctx, {
          type: "line",
          data: {
            labels: Object.keys(bitcoinData), // Array com as datas
            datasets: [
              {
                label: "Preço de fechamento Bitcoin",
                data: Object.values(bitcoinData),
              },
            ],
          },
        });

        setChart(chartInstance);
      }

      renderChart();
    }
  }, [loading, bitcoinData]);

  return (
    <div>
      <FilterDate setData={setData} />
      <div>{loading ? "Carregando..." : <canvas id="myCanvas" />}</div>
    </div>
  );
}

export default Graphs;




Componente que pega os inputs de data do usuário:

import { useState } from "react";

function FilterDate(props) {

  const [formData, setFormData] = useState({
    from: "",
    to: "",
  });

  function handleChange(event) {
    let value = event.target.value;
    setFormData({ ...formData, [event.target.name]: value });
  };

  function handleSubmit(event) {
    event.preventDefault();
    props.setData(formData);
  };

  return (
    <div className="d-flex w-50 m-3">
      <form onSubmit={handleSubmit}>
        <label>
          From:{" "}
          <input
            name="from"
            onChange={handleChange}
            id="inicial"
            className="form-control me-3"
            type="date"
            placeholder="Data Inicial"
          />
        </label>

        <label>
          To:{" "}
          <input
            name="to"
            onChange={handleChange}
            id="final"
            className="form-control"
            type="date"
            placeholder="Data Final"
          />
        </label>

        <button type="submit" className="btn btn-light">Filter</button>
      </form>
    </div>
  );
}

export default FilterDate;




App.js:
import Graph from "./Graphs";

function App() {
  return (
    <div>
      <Graph />
    </div>
  );
}

export default App;
 */













